/*! qd-backend - v0.1.0 - 2014-07-12
* Copyright (c) 2014 lovemoon@yeah.net; Licensed GPLv2 */
var app=angular.module("app",["ui.router","ui.bootstrap","templates","homeModule"]);app.config(["$httpProvider",function(a){a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",a.defaults.transformRequest=[function(a){return angular.isObject(a)&&"[object File]"!==String(a)?serialize(a):a}],a.interceptors.push(["$q",function(a){return{request:function(b){var c=b.url.match(/:(\w+)/g);return null!==c&&angular.forEach(c,function(a){var c=a.substring(1);b.params&&b.params.hasOwnProperty(c)?(b.url=b.url.replace(a,b.params[c]),delete b.params[c]):b.data&&b.data.hasOwnProperty(c)&&(b.url=b.url.replace(a,b.data[c]),delete b.data[c])}),a.when(b)},response:function(b){if(b.config.parsing!==!1&&200===b.status&&angular.isObject(b.data)){var c=b.data;return c.data=c.data||{},(c.data.message||c.message)&&(c.data.message=c.data.message||c.message),-1!==[0,200].indexOf(c.code)?c.data:a.reject(c.data)}return a.when(b)},requestError:function(b){return a.reject(b)},responseError:function(b){return a.reject(b)}}}])}]),angular.element(document).ready(function(){angular.bootstrap(document,["app"])}),app.directive("csFocus",["$timeout",function(a){return{restrict:"A",replace:!1,link:function(b,c){var d=0;!function e(){c.is(":visible")?c.focus():d++<1&&a(e,200)}()}}}]),app.directive("csNumber",function(){return{restrict:"A",replace:!1,link:function(a,b){b.on("focus",function(){this.type="number"}).on("blur",function(){this.type="text"})}}}),app.directive("csBottom",["$window","$document",function(a,b){return{restrict:"A",replace:!1,link:function(c,d){var e=function(){d.toggleClass("keep-bottom",window.innerHeight>=b.height())},f=function(a){var b=["datetime","datetime-local","email","month","number","range","search","tel","time","url","week"].indexOf(a.target.type);d.hasClass("keep-bottom")&&("TEXTAREA"===a.target.tagName||b)&&d.hide()},g=function(){d.show()};b.on("focus","input,textarea",f),b.on("blur","input,textarea",g),angular.element(a).on("resize",e).resize(),d.on("$destroy",function(){angular.element(a).off("resize",e),b.off("focus","input,textarea",f),b.off("blur","input,textarea",g)})}}}]),app.directive("csThumbnail",["$window",function(a){var b={support:!(!a.FileReader||!a.CanvasRenderingContext2D),isFile:function(b){return angular.isObject(b)&&b instanceof a.File},isImage:function(a){var b="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(b)}};return{restrict:"A",template:"<canvas />",link:function(a,c,d){function e(a){var b=new Image;b.onload=f,b.src=a.target.result}function f(){var a=g.width||this.width/this.height*g.height,b=g.height||this.height/this.width*g.width;h.attr({width:a,height:b}),h[0].getContext("2d").drawImage(this,0,0,a,b)}if(b.support){var g=a.$eval(d.csThumbnail);if(b.isFile(g.file)&&b.isImage(g.file)){var h=c.find("canvas"),i=new FileReader;i.onload=e,i.readAsDataURL(g.file)}}}}}]),app.filter("group",function(){return function(a,b){if(!a)return a;if(a.$rows){for(var c=[],d=0;d<a.$rows.length;d++)c=c.concat(a.$rows[d]);if(c.length!==a.length)delete a.$rows;else for(var e=0;e<a.length;e++)if(a[e]!==c[e]){delete a.$rows;break}}if(!a.$rows){for(var f=[],g=0;g<a.length;g++)g%b===0&&f.push([]),f[f.length-1].push(a[g]);a.$rows=f}return a.$rows}}),app.filter("empty",function(){return function(a){return!a||angular.equals({},a)||angular.equals([],a)}}),app.filter("min",function(){return function(a,b){return Math.min(a,b)}}),app.filter("max",function(){return function(a,b){return Math.max(a,b)}}),function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}(),function(){"function"!=typeof Array.prototype.indexOf&&(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})}();var serialize=function(a){var b,c,d,e,f,g,h,i="";for(b in a)if(a.hasOwnProperty(b))if(c=a[b],c instanceof Array)for(h=0;h<c.length;++h)f=c[h],d=b+"["+h+"]",g={},g[d]=f,i+=serialize(g)+"&";else if(c instanceof Object)for(e in c)c.hasOwnProperty(e)&&(f=c[e],d=b+"["+e+"]",g={},g[d]=f,i+=serialize(g)+"&");else void 0!==c&&null!==c&&(i+=encodeURIComponent(b)+"="+encodeURIComponent(c)+"&");return i.length?i.substr(0,i.length-1):i},homeModule=angular.module("homeModule",["ui.router","ui.bootstrap"]);homeModule.config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/home"),a.state("home",{url:"/home",templateUrl:"modules/home/templates/home.html"})}]),angular.module("templates",["modules/home/templates/home.html"]),angular.module("modules/home/templates/home.html",[]).run(["$templateCache",function(a){a.put("modules/home/templates/home.html","home")}]);
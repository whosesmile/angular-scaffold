/*! angular-scaffold - v0.1.0 - 2014-07-01
* Copyright (c) 2014 whosesmile; Licensed GPLv2 */
!function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}(),function(){"function"!=typeof Array.prototype.indexOf&&(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})}();var serialize=function(a){var b,c,d,e,f,g,h,i="";for(b in a)if(a.hasOwnProperty(b))if(c=a[b],c instanceof Array)for(h=0;h<c.length;++h)f=c[h],d=b+"["+h+"]",g={},g[d]=f,i+=serialize(g)+"&";else if(c instanceof Object)for(e in c)c.hasOwnProperty(e)&&(f=c[e],d=b+"["+e+"]",g={},g[d]=f,i+=serialize(g)+"&");else void 0!==c&&null!==c&&(i+=encodeURIComponent(b)+"="+encodeURIComponent(c)+"&");return i.length?i.substr(0,i.length-1):i},app=angular.module("app",["ui.router","ui.bootstrap","registerModule"]);app.config(["$httpProvider",function(a){a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",a.defaults.transformRequest=[function(a){return angular.isObject(a)&&"[object File]"!==String(a)?serialize(a):a}],a.interceptors.push(["$q",function(a){return{request:function(b){return a.when(b)},response:function(b){if(b.config.parsing!==!1&&200===b.status&&angular.isObject(b.data)){var c=b.data;return 200===c.code?c.data:a.reject(c.data)}return a.when(b)},requestError:function(b){return a.reject(b)},responseError:function(b){return a.reject(b)}}}])}]),angular.element(document).ready(function(){angular.bootstrap(document,["app"])}),app.directive("csFocus",["$timeout",function(a){return{restrict:"A",replace:!1,link:function(b,c){var d=0;!function e(){c.is(":visible")?c.focus():d++<1&&a(e,200)}()}}}]);var registerModule=angular.module("registerModule",["ui.router","ui.bootstrap"]);registerModule.config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/register/step1"),a.state("register",{"abstract":!0,url:"/register",templateUrl:"modules/register/templates/register.html"}).state("register.mobile",{url:"/step1",controller:"mobileController",templateUrl:"modules/register/templates/mobile.html"}).state("register.captcha",{url:"/step2",controller:"captchaController",templateUrl:"modules/register/templates/captcha.html"})}]);var demoModule=angular.module("demoModule",["ui.router"]);demoModule.config(function(a,b){b.otherwise("/state1"),a.state("state1",{url:"/state1",templateUrl:"components/demo/state1.partials.html"}).state("state2",{url:"/state2",templateUrl:"components/demo/state2.partials.html"})}),registerModule.controller("mobileController",["$scope","$state","registerService",function(a,b,c){a.submit=function(){c.sendMobile().then(function(){b.go("register.captcha")},function(a){console.log(a)})}}]),registerModule.controller("captchaController",["$scope","$state","$timeout","registerService",function(a,b,c,d){a.submit=function(){d.sendCaptch().then(function(){},function(a){console.log(a)})},a.captcha=function(){d.sendFresh()},a.resend=!1,a.remaining=59;var e=null;a.$on("$destroy",function(){c.cancel(e)}),function f(){e=c(function(){a.remaining-=1,0===a.remaining?a.resend=!0:f()},1e3)}()}]),registerModule.factory("registerService",["$http",function(a){return{sendMobile:function(){return a({url:"mock/register/mobile.json",method:"post"})},sendCapcha:function(){return a({url:"mock/register/mobile.json",method:"post"})},sendFresh:function(){return a({url:"mock/register/mobile.json",method:"post"})}}}]),angular.module("templates",["../app/modules/register/templates/captcha.html","../app/modules/register/templates/mobile.html","../app/modules/register/templates/register.html"]),angular.module("../app/modules/register/templates/captcha.html",[]).run(["$templateCache",function(a){a.put("../app/modules/register/templates/captcha.html",'<form role="form" name="captchaForm" ng-submit="submit()">\n  <div class="form-group form-group-first">\n    <input type="number" name="" class="form-control" id="inputCapcha" placeholder="请输入验证码" cs-focus required ng-pattern="/\\d{4,}/" />\n  </div>\n  <div class="form-group">\n    <button type="submit" class="btn btn-primary full-width" ng-disabled="captchaForm.$invalid">注册账号</button>\n  </div>\n  <div class="form-group">\n    <small ng-if="!resend">{{ remaining }}秒后可重新发送</small>\n    <a ng-if="resend" class="small">重发验证码</a>\n  </div>\n</form>')}]),angular.module("../app/modules/register/templates/mobile.html",[]).run(["$templateCache",function(a){a.put("../app/modules/register/templates/mobile.html",'<form role="form" name="mobileForm" ng-submit="submit()">\n  <div class="form-group form-group-first">\n    <input type="number" name="mobile" ng-model="mobile" class="form-control" id="inputMobile" placeholder="请输入手机号码" cs-focus required ng-pattern="/\\d{11}/" />\n  </div>\n  <div class="form-group">\n    <button type="submit" class="btn btn-primary full-width" ng-disabled="mobileForm.$invalid">获取验证码</button>\n  </div>\n</form>')}]),angular.module("../app/modules/register/templates/register.html",[]).run(["$templateCache",function(a){a.put("../app/modules/register/templates/register.html",'<div class="container-fluid">\n  <div class="row">\n    <div class="col-md-12" ui-view></div>\n  </div>\n</div>')}]);